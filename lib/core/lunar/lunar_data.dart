/// Pre-computed Lunar Calendar Data (1900-2100)
/// 
/// Data format (16-bit integer per year):
/// - Bits 0-3: Leap month (0 = no leap, 1-12 = leap month number)
/// - Bit 4-15: Days in each month (0 = 29 days, 1 = 30 days)
///   Bit 4 = month 1, Bit 5 = month 2, ..., Bit 15 = month 12
/// 
/// Source: Vietnam Academy of Science and Technology

/// Lunar data encoded as hex values
/// Each value represents one year's lunar calendar info
const List<int> lunarInfo = [
  /* 1900 */ 0x04bd8, /* 1901 */ 0x04ae0, /* 1902 */ 0x0a570, /* 1903 */ 0x054d5,
  /* 1904 */ 0x0d260, /* 1905 */ 0x0d950, /* 1906 */ 0x16554, /* 1907 */ 0x056a0,
  /* 1908 */ 0x09ad0, /* 1909 */ 0x055d2, /* 1910 */ 0x04ae0, /* 1911 */ 0x0a5b6,
  /* 1912 */ 0x0a4d0, /* 1913 */ 0x0d250, /* 1914 */ 0x1d255, /* 1915 */ 0x0b540,
  /* 1916 */ 0x0d6a0, /* 1917 */ 0x0ada2, /* 1918 */ 0x095b0, /* 1919 */ 0x14977,
  /* 1920 */ 0x04970, /* 1921 */ 0x0a4b0, /* 1922 */ 0x0b4b5, /* 1923 */ 0x06a50,
  /* 1924 */ 0x06d40, /* 1925 */ 0x1ab54, /* 1926 */ 0x02b60, /* 1927 */ 0x09570,
  /* 1928 */ 0x052f2, /* 1929 */ 0x04970, /* 1930 */ 0x06566, /* 1931 */ 0x0d4a0,
  /* 1932 */ 0x0ea50, /* 1933 */ 0x16a95, /* 1934 */ 0x05ad0, /* 1935 */ 0x02b60,
  /* 1936 */ 0x186e3, /* 1937 */ 0x092e0, /* 1938 */ 0x1c8d7, /* 1939 */ 0x0c950,
  /* 1940 */ 0x0d4a0, /* 1941 */ 0x1d8a6, /* 1942 */ 0x0b550, /* 1943 */ 0x056a0,
  /* 1944 */ 0x1a5b4, /* 1945 */ 0x025d0, /* 1946 */ 0x092d0, /* 1947 */ 0x0d2b2,
  /* 1948 */ 0x0a950, /* 1949 */ 0x0b557, /* 1950 */ 0x06ca0, /* 1951 */ 0x0b550,
  /* 1952 */ 0x15355, /* 1953 */ 0x04da0, /* 1954 */ 0x0a5b0, /* 1955 */ 0x14573,
  /* 1956 */ 0x052b0, /* 1957 */ 0x0a9a8, /* 1958 */ 0x0e950, /* 1959 */ 0x06aa0,
  /* 1960 */ 0x0aea6, /* 1961 */ 0x0ab50, /* 1962 */ 0x04b60, /* 1963 */ 0x0aae4,
  /* 1964 */ 0x0a570, /* 1965 */ 0x05260, /* 1966 */ 0x0f263, /* 1967 */ 0x0d950,
  /* 1968 */ 0x05b57, /* 1969 */ 0x056a0, /* 1970 */ 0x096d0, /* 1971 */ 0x04dd5,
  /* 1972 */ 0x04ad0, /* 1973 */ 0x0a4d0, /* 1974 */ 0x0d4d4, /* 1975 */ 0x0d250,
  /* 1976 */ 0x0d558, /* 1977 */ 0x0b540, /* 1978 */ 0x0b6a0, /* 1979 */ 0x195a6,
  /* 1980 */ 0x095b0, /* 1981 */ 0x049b0, /* 1982 */ 0x0a974, /* 1983 */ 0x0a4b0,
  /* 1984 */ 0x0b27a, /* 1985 */ 0x06a50, /* 1986 */ 0x06d40, /* 1987 */ 0x0af46,
  /* 1988 */ 0x0ab60, /* 1989 */ 0x09570, /* 1990 */ 0x04af5, /* 1991 */ 0x04970,
  /* 1992 */ 0x064b0, /* 1993 */ 0x074a3, /* 1994 */ 0x0ea50, /* 1995 */ 0x06b58,
  /* 1996 */ 0x05ac0, /* 1997 */ 0x0ab60, /* 1998 */ 0x096d5, /* 1999 */ 0x092e0,
  /* 2000 */ 0x0c960, /* 2001 */ 0x0d954, /* 2002 */ 0x0d4a0, /* 2003 */ 0x0da50,
  /* 2004 */ 0x07552, /* 2005 */ 0x056a0, /* 2006 */ 0x0abb7, /* 2007 */ 0x025d0,
  /* 2008 */ 0x092d0, /* 2009 */ 0x0cab5, /* 2010 */ 0x0a950, /* 2011 */ 0x0b4a0,
  /* 2012 */ 0x0baa4, /* 2013 */ 0x0ad50, /* 2014 */ 0x055d9, /* 2015 */ 0x04ba0,
  /* 2016 */ 0x0a5b0, /* 2017 */ 0x15176, /* 2018 */ 0x052b0, /* 2019 */ 0x0a930,
  /* 2020 */ 0x07954, /* 2021 */ 0x06aa0, /* 2022 */ 0x0ad50, /* 2023 */ 0x05b52,
  /* 2024 */ 0x04b60, /* 2025 */ 0x0a6e6, /* 2026 */ 0x0a4e0, /* 2027 */ 0x0d260,
  /* 2028 */ 0x0ea65, /* 2029 */ 0x0d530, /* 2030 */ 0x05aa0, /* 2031 */ 0x076a3,
  /* 2032 */ 0x096d0, /* 2033 */ 0x04afb, /* 2034 */ 0x04ad0, /* 2035 */ 0x0a4d0,
  /* 2036 */ 0x1d0b6, /* 2037 */ 0x0d250, /* 2038 */ 0x0d520, /* 2039 */ 0x0dd45,
  /* 2040 */ 0x0b5a0, /* 2041 */ 0x056d0, /* 2042 */ 0x055b2, /* 2043 */ 0x049b0,
  /* 2044 */ 0x0a577, /* 2045 */ 0x0a4b0, /* 2046 */ 0x0aa50, /* 2047 */ 0x1b255,
  /* 2048 */ 0x06d20, /* 2049 */ 0x0ada0, /* 2050 */ 0x14b63, /* 2051 */ 0x09370,
  /* 2052 */ 0x049f8, /* 2053 */ 0x04970, /* 2054 */ 0x064b0, /* 2055 */ 0x168a6,
  /* 2056 */ 0x0ea50, /* 2057 */ 0x06aa0, /* 2058 */ 0x1a6c4, /* 2059 */ 0x0aae0,
  /* 2060 */ 0x092e0, /* 2061 */ 0x0d2e3, /* 2062 */ 0x0c960, /* 2063 */ 0x0d557,
  /* 2064 */ 0x0d4a0, /* 2065 */ 0x0da50, /* 2066 */ 0x05d55, /* 2067 */ 0x056a0,
  /* 2068 */ 0x0a6d0, /* 2069 */ 0x055d4, /* 2070 */ 0x052d0, /* 2071 */ 0x0a9b8,
  /* 2072 */ 0x0a950, /* 2073 */ 0x0b4a0, /* 2074 */ 0x0b6a6, /* 2075 */ 0x0ad50,
  /* 2076 */ 0x055a0, /* 2077 */ 0x0aba4, /* 2078 */ 0x0a5b0, /* 2079 */ 0x052b0,
  /* 2080 */ 0x0b273, /* 2081 */ 0x06930, /* 2082 */ 0x07337, /* 2083 */ 0x06aa0,
  /* 2084 */ 0x0ad50, /* 2085 */ 0x14b55, /* 2086 */ 0x04b60, /* 2087 */ 0x0a570,
  /* 2088 */ 0x054e4, /* 2089 */ 0x0d160, /* 2090 */ 0x0e968, /* 2091 */ 0x0d520,
  /* 2092 */ 0x0daa0, /* 2093 */ 0x16aa6, /* 2094 */ 0x056d0, /* 2095 */ 0x04ae0,
  /* 2096 */ 0x0a9d4, /* 2097 */ 0x0a4d0, /* 2098 */ 0x0d150, /* 2099 */ 0x0f252,
  /* 2100 */ 0x0d520,
];

/// Days from January 1st to Lunar New Year for each year
/// Index 0 = year 1900
const List<int> newYearOffsets = [
  /* 1900 */ 30, /* 1901 */ 18, /* 1902 */ 7, /* 1903 */ 26,
  /* 1904 */ 14, /* 1905 */ 3, /* 1906 */ 22, /* 1907 */ 10,
  /* 1908 */ 29, /* 1909 */ 17, /* 1910 */ 6, /* 1911 */ 25,
  /* 1912 */ 14, /* 1913 */ 2, /* 1914 */ 21, /* 1915 */ 10,
  /* 1916 */ 29, /* 1917 */ 17, /* 1918 */ 6, /* 1919 */ 25,
  /* 1920 */ 14, /* 1921 */ 3, /* 1922 */ 22, /* 1923 */ 11,
  /* 1924 */ 30, /* 1925 */ 18, /* 1926 */ 7, /* 1927 */ 26,
  /* 1928 */ 14, /* 1929 */ 3, /* 1930 */ 22, /* 1931 */ 11,
  /* 1932 */ 30, /* 1933 */ 18, /* 1934 */ 7, /* 1935 */ 26,
  /* 1936 */ 15, /* 1937 */ 3, /* 1938 */ 22, /* 1939 */ 11,
  /* 1940 */ 30, /* 1941 */ 18, /* 1942 */ 7, /* 1943 */ 26,
  /* 1944 */ 14, /* 1945 */ 2, /* 1946 */ 21, /* 1947 */ 10,
  /* 1948 */ 29, /* 1949 */ 17, /* 1950 */ 6, /* 1951 */ 26,
  /* 1952 */ 14, /* 1953 */ 3, /* 1954 */ 22, /* 1955 */ 11,
  /* 1956 */ 30, /* 1957 */ 18, /* 1958 */ 7, /* 1959 */ 26,
  /* 1960 */ 15, /* 1961 */ 3, /* 1962 */ 22, /* 1963 */ 10,
  /* 1964 */ 29, /* 1965 */ 17, /* 1966 */ 6, /* 1967 */ 25,
  /* 1968 */ 14, /* 1969 */ 2, /* 1970 */ 21, /* 1971 */ 10,
  /* 1972 */ 29, /* 1973 */ 17, /* 1974 */ 6, /* 1975 */ 25,
  /* 1976 */ 14, /* 1977 */ 3, /* 1978 */ 22, /* 1979 */ 11,
  /* 1980 */ 30, /* 1981 */ 18, /* 1982 */ 7, /* 1983 */ 26,
  /* 1984 */ 14, /* 1985 */ 3, /* 1986 */ 22, /* 1987 */ 11,
  /* 1988 */ 30, /* 1989 */ 18, /* 1990 */ 7, /* 1991 */ 26,
  /* 1992 */ 15, /* 1993 */ 3, /* 1994 */ 22, /* 1995 */ 10,
  /* 1996 */ 29, /* 1997 */ 18, /* 1998 */ 7, /* 1999 */ 26,
  /* 2000 */ 14, /* 2001 */ 3, /* 2002 */ 22, /* 2003 */ 11,
  /* 2004 */ 30, /* 2005 */ 18, /* 2006 */ 7, /* 2007 */ 26,
  /* 2008 */ 14, /* 2009 */ 3, /* 2010 */ 22, /* 2011 */ 11,
  /* 2012 */ 30, /* 2013 */ 18, /* 2014 */ 7, /* 2015 */ 26,
  /* 2016 */ 14, /* 2017 */ 3, /* 2018 */ 22, /* 2019 */ 11,
  /* 2020 */ 30, /* 2021 */ 18, /* 2022 */ 7, /* 2023 */ 26,
  /* 2024 */ 14, /* 2025 */ 3, /* 2026 */ 22, /* 2027 */ 11,
  /* 2028 */ 30, /* 2029 */ 18, /* 2030 */ 7, /* 2031 */ 26,
  /* 2032 */ 15, /* 2033 */ 3, /* 2034 */ 22, /* 2035 */ 11,
  /* 2036 */ 30, /* 2037 */ 18, /* 2038 */ 7, /* 2039 */ 26,
  /* 2040 */ 14, /* 2041 */ 3, /* 2042 */ 22, /* 2043 */ 10,
  /* 2044 */ 29, /* 2045 */ 17, /* 2046 */ 6, /* 2047 */ 25,
  /* 2048 */ 14, /* 2049 */ 3, /* 2050 */ 22, /* 2051 */ 11,
  /* 2052 */ 30, /* 2053 */ 18, /* 2054 */ 7, /* 2055 */ 26,
  /* 2056 */ 14, /* 2057 */ 3, /* 2058 */ 22, /* 2059 */ 11,
  /* 2060 */ 30, /* 2061 */ 18, /* 2062 */ 7, /* 2063 */ 26,
  /* 2064 */ 15, /* 2065 */ 3, /* 2066 */ 22, /* 2067 */ 10,
  /* 2068 */ 29, /* 2069 */ 17, /* 2070 */ 6, /* 2071 */ 25,
  /* 2072 */ 14, /* 2073 */ 3, /* 2074 */ 22, /* 2075 */ 11,
  /* 2076 */ 30, /* 2077 */ 18, /* 2078 */ 7, /* 2079 */ 26,
  /* 2080 */ 14, /* 2081 */ 3, /* 2082 */ 22, /* 2083 */ 10,
  /* 2084 */ 29, /* 2085 */ 17, /* 2086 */ 6, /* 2087 */ 25,
  /* 2088 */ 14, /* 2089 */ 3, /* 2090 */ 22, /* 2091 */ 11,
  /* 2092 */ 30, /* 2093 */ 18, /* 2094 */ 7, /* 2095 */ 26,
  /* 2096 */ 14, /* 2097 */ 3, /* 2098 */ 22, /* 2099 */ 11,
  /* 2100 */ 30,
];

/// Get number of days in a lunar month
int getLunarMonthDays(int yearInfo, int month) {
  return ((yearInfo >> (16 - month)) & 1) != 0 ? 30 : 29;
}

/// Get leap month number (0 if no leap month)
int getLeapMonth(int yearInfo) {
  return yearInfo & 0xf;
}

/// Get number of days in leap month
int getLeapMonthDays(int yearInfo) {
  if (getLeapMonth(yearInfo) == 0) return 0;
  return ((yearInfo >> 16) & 1) != 0 ? 30 : 29;
}

/// Get total days in a lunar year
int getLunarYearDays(int yearInfo) {
  int days = 0;
  for (int i = 1; i <= 12; i++) {
    days += getLunarMonthDays(yearInfo, i);
  }
  days += getLeapMonthDays(yearInfo);
  return days;
}

